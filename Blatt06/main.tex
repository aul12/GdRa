\documentclass[DIN, pagenumber=false, fontsize=11pt, parskip=half]{scrartcl}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage[utf8]{inputenc} % this is needed for umlauts
\usepackage[ngerman]{babel} % this is needed for umlauts
\usepackage[T1]{fontenc} 
\usepackage{commath}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage{float}
\usepackage{tikz-timing}
\usepackage{tikz}
\usepackage{multirow}
\usepackage{colortbl}
\usepackage{xstring}
\usepackage[european]{circuitikz}
\usepackage{ifthen}

\usetikzlibrary{calc,shapes.multipart,chains,arrows}

\title{Grundlagen der Rechnerarchitektur}
\author{Tim Luchterhand, Paul Nykiel (Abgabegruppe 117)}

\newcommand{\minTerm}[4]{
    \IfEqCase{#1}{
        {0}{\overline{x_0}\ }
        {1}{x_0}
    }
    \IfEqCase{#2}{
        {0}{\overline{x_1}\ }
        {1}{x_1}
    }
    \IfEqCase{#3}{
        {0}{\overline{x_2}\ }
        {1}{x_2}
    }
    \IfEqCase{#4}{
        {0}{\overline{x_3}\ }
        {1}{x_3}
    }[\PackageError{minTerm}{Values must either be 0 or 1}]
}

\newcommand{\maxTerm}[4]{
    (
    \IfEqCase{#1}{
        {0}{\overline{x_0} + }
        {1}{x_0 + }
    }
    \IfEqCase{#2}{
        {0}{\overline{x_1} + }
        {1}{x_1 + }
    }
    \IfEqCase{#3}{
        {0}{\overline{x_2} + }
        {1}{x_2 + }
    }
    \IfEqCase{#4}{
        {0}{\overline{x_3}}
        {1}{x_3}
    }[\PackageError{minTerm}{Values must either be 0 or 1}]
    )
}


\begin{document}
    \maketitle
    \section{Digitale Schaltungen}
    \subsection{}
    \begin{enumerate}[label = (\alph*)]
        \item 
            \begin{table}[H]
                \centering
                \begin{tabular}{cccc|c|c}
                    \toprule
                    $2^3 = x_3$ & $2^2 = x_2$ & $2^1 = x_1$ & $2^0 = x_0$ & $x_{10}$ & $f(x)$ \\
                    \midrule
                    0 & 0 & 0 & 0 & 0 & 1\\
                    0 & 0 & 0 & 1 & 1 & 1\\
                    0 & 0 & 1 & 0 & 2 & 1\\
                    0 & 0 & 1 & 1 & 3 & 1\\
                    0 & 1 & 0 & 0 & 4 & 1\\
                    0 & 1 & 0 & 1 & 5 & 1\\
                    0 & 1 & 1 & 0 & 6 & 1\\
                    0 & 1 & 1 & 1 & 7 & 0\\
                    1 & 0 & 0 & 0 & 8 & 1\\
                    1 & 0 & 0 & 1 & 9 & 1\\
                    1 & 0 & 1 & 0 & 10 & 1\\
                    1 & 0 & 1 & 1 & 11 & 0\\
                    1 & 1 & 0 & 0 & 12 & 1\\
                    1 & 1 & 0 & 1 & 13 & 1\\
                    1 & 1 & 1 & 0 & 14 & 1\\
                    1 & 1 & 1 & 1 & 15 & 1\\
                    \bottomrule
                \end{tabular}
            \end{table}
        \item
            \begin{eqnarray*}
                f(x) &=& \minTerm{0}{0}{0}{0}\\
                    && + \minTerm{0}{0}{0}{1}\\ 
                    && + \minTerm{0}{0}{1}{0}\\ 
                    && + \minTerm{0}{0}{1}{1}\\ 
                    && + \minTerm{0}{1}{0}{0}\\ 
                    && + \minTerm{0}{1}{0}{1}\\ 
                    && + \minTerm{0}{1}{1}{0}\\ 
                    && + \minTerm{1}{0}{0}{0}\\ 
                    && + \minTerm{1}{0}{0}{1}\\ 
                    && + \minTerm{1}{0}{1}{0}\\ 
                    && + \minTerm{1}{1}{0}{0}\\ 
                    && + \minTerm{1}{1}{0}{1}\\ 
                    && + \minTerm{1}{1}{1}{0}\\ 
                    && + \minTerm{1}{1}{1}{1}\\ 
            \end{eqnarray*}
        \item
            \begin{equation*}
                f(x) = \maxTerm{1}{0}{0}{0} \cdot \maxTerm{0}{1}{0}{0}
            \end{equation*}
        \item Gatterschaltung: %TODO machen wir hier alles richtig? Das wird viel zu groß
            \begin{figure}[H]
                \centering
                \begin{circuitikz}
                    \node[european and port] at (6,0.5) (and00){};
                    \node[european and port] at (6,2.5) (and01){};
                    \node[european and port] at (8,1.5) (and02){};
                    \node[european not port] at (3,0) (not00){};
                    \node[european not port] at (3,1) (not01){};
                    \node[european not port] at (3,2) (not02){};
                    \node[european not port] at (3,3) (not03){};
                    \draw (and00.out) -| (and02.in 2);
                    \draw (and01.out) -| (and02.in 1);
                    \draw (not00.out) -| (and00.in 2);
                    \draw (not01.out) -| (and00.in 1);
                    \draw (not02.out) -| (and01.in 2);
                    \draw (not03.out) -| (and01.in 1);
                \end{circuitikz}
            \end{figure}
        \item
            Karnaugh-Veitch-Diagramm:
            \begin{figure}[H]
                \centering
                \begin{tabular}{cc|cccc|cc}
                    & &  & \multicolumn{2}{c}{$x_0$} & & \\
                    & & 0 & 1 & 1 & 0\\
                    \midrule
                    \multirow{4}{*}{$x_1$} & 0 & \cellcolor{purple!50}1 & \cellcolor{purple!50}1 & \cellcolor{blue!50}1 & \cellcolor{purple!50}1 & 0 &\multirow{4}{*}{$x_3$}\\
                     & 1 & \cellcolor{purple!50}1 & \cellcolor{purple!50}1 & 0 & \cellcolor{red!50}1 & 0\\
                     & 1 & \cellcolor{green!50}1 & 0 & \cellcolor{orange!50}1 & \cellcolor{orange!50}1 & 1\\
                     & 0 & \cellcolor{cyan}1 & \cellcolor{yellow!50}1 & \cellcolor{orange!50}1 & \cellcolor{orange!50}1 & 1\\
                    \midrule
                    & & 0 & 0 & 1 & 1\\
                    & &  & \multicolumn{2}{c}{$x_2$} & & \\
                \end{tabular}
            \end{figure}
            Daraus ergibt sich:
            \begin{eqnarray*}
                f_\text{Min}(x) &=& \textcolor{purple}{\overline{x_2} \cdot \overline{x_3}} \\ 
                    && + \textcolor{orange}{x_2 \cdot x_3} \\ 
                    && + \textcolor{blue}{\overline{x_1} \cdot x_2 \cdot \overline{x_3}} \\ 
                    && + \textcolor{red}{\overline{x_0} \cdot x_2 \cdot \overline{x_3}} \\ 
                    && + \textcolor{yellow}{\overline{x_1} \cdot \overline{x_2} \cdot x_3} \\ 
                    && + \textcolor{green}{\overline{x_0} \cdot \overline{x_2} \cdot x_3} \\ 
            \end{eqnarray*}
        \item Gatterschaltung:
            \begin{figure}[H]
                \centering
                \begin{circuitikz}
                    \node at (0, 0) (x0) {$x_0$};
                    \node at (0, 1) (x1) {$x_1$};
                    \node at (0, 2) (x2) {$x_2$};
                    \node at (0, 3) (x3) {$x_3$};
                    \node[european not port] at (5,4) (not0){};
                    \node[european not port] at (4,5) (not1){};
                    \node[european not port] at (3,6) (not2){};
                    \node[european not port] at (2,7) (not3){};
                    \draw (x0) -| (not0.in);
                    \draw (x1) -| (not1.in);
                    \draw (x2) -| (not2.in);
                    \draw (x3) -| (not3.in);
                    \node[european and port] at (8,9) (and1){};
                    \node[european and port] at (8,0) (and2){};
                    \node[european and port] at (8,1) (and31){};
                    \node[european and port] at (10,2) (and32){};
                    \node[european and port] at (8,3) (and41){};
                    \node[european and port] at (10,4) (and42){};
                    \node[european and port] at (8,5) (and51){};
                    \node[european and port] at (10,6) (and52){};
                    \node[european and port] at (8,7) (and61){};
                    \node[european and port] at (10,8) (and62){};
                    \draw (and31.out) -| (and32.in 2);
                    \draw (and41.out) -| (and42.in 2);
                    \draw (and51.out) -| (and52.in 2);
                    \draw (and61.out) -| (and62.in 2);
                    % !x2 && !x3
                    \draw (not2.out) |- (and1.in 2);
                    \draw (not3.out) |- (and1.in 1);
                    % x2 && x3
                    \draw (x2) -- (4, 2);
                    \draw (x3) -- (4.5, 3);
                    \draw (4,2) |- (and2.in 2);
                    \draw (4.5,3) |- (and2.in 1);
                    % !x1 && x2 && !x3
                    \draw (not1.out) |- (and61.in 1);
                    \draw (not3.out) |- (and62.in 1);
                    \draw (x2) -- (5.5, 2) |- (and61.in 2);
                    % !x0 && x2 && !x3
                    \draw (not0.out) |- (and51.in 1);
                    \draw (not3.out) |- (3.5, 7) |- (and52.in 1);
                    \draw (x2) -- (5.5, 2) |- (and51.in 2);
                    % !x1 && !x2 && x3
                    \draw (not1.out) -| (and41.in 1);
                    \draw (not2.out) -| (and42.in 1);
                    \draw (x3) -| (and41.in 2);
                    % !x0 && !x2 && x3
                    \draw(not0.out) |- (and31.in 2);
                    \draw(not2.out) -| (5.7,3) |- (and32.in 1);
                    \draw(x3) -| (and31.in 1);
                    \node[european or port] at (12,8) (or0){};
                    \node[european or port] at (12,5) (or1){};
                    \node[european or port] at (12,1.5) (or2){};
                    \node[european or port] at (14,6.5) (or3){};
                    \node[european or port] at (16,4) (or4){};
                    \draw (and1.out) -| (or0.in 1);
                    \draw (and62.out) |-  (or0.in 2);
                    \draw (and52.out) |-  (or1.in 1);
                    \draw (and42.out) |-  (or1.in 2);
                    \draw (and32.out) |-  (or2.in 1);
                    \draw (and2.out) -|  (or2.in 2);
                    \draw (or0.out) -| (or3.in 1);
                    \draw (or1.out) -| (or3.in 2);
                    \draw (or2.out) -| (or4.in 2);
                    \draw (or3.out) -| (or4.in 1);
                    \node at (17,4) (f){$f(x)$};
                    \draw (or4.out) -- (f);
                \end{circuitikz}
            \end{figure}
        \item %TODO
    \end{enumerate}

    \subsection{}
    \begin{enumerate}[label = (\alph*)]
        \item Bei n- bzw. p-Mos Schaltungen fließt in dem Fall das der Ausgang auf
            \textit{GND} liegt fließt durch den Pull-Up Widerstand ein Strom.
            Dieser Strom sorgt für einen erhöhten Stromverbrauch und damit verbunden
            thermische Probleme wenn viele Logikelemente auf kleinem Raum realisiert werden.

            Zudem muss eine Kompromiss bei der Dimensionierung des Pull-Up Widerstandes
            eingegangen werden, bei zu kleinem Widerstand fließt ein sehr großer Strom,
            bei zu großem Widerstand kann das Gatter nicht mehr funktionieren wenn
            der Ausgang gegen \textit{GND} gezogen wird.

            Des weiteren sind Widerständer schwierig auf die Größenordnung von MOS-Transitoren
            zu verkleineren. Außerdem führt die vergleichsweise große physikalische Ausdehnung
            von Widerständen bei hohen Taktraten zu Problemen durch die parasitären
            Kapazitäten und Induktivitäten eines Widerstandes.
        \item
            Die ausprobieren der verschiedenen Eingangswerte ergibt sich:
            \begin{table}[H]
                \centering
                \begin{tabular}{ccc|c}
                    \toprule
                    $x_1$ & $x_2$ & $x_3$ & $f(x_1, x_2, x_3)$ \\
                    \midrule
                    0 & 0 & 0 & 1 \\
                    1 & 0 & 0 & 1 \\
                    0 & 1 & 0 & 1 \\
                    1 & 1 & 0 & 0 \\
                    0 & 0 & 1 & 1 \\
                    1 & 0 & 1 & 1 \\
                    0 & 1 & 1 & 1 \\
                    1 & 1 & 1 & 0 \\
                    \bottomrule
                \end{tabular}
            \end{table}
            Daraus folgt:
            \begin{equation*}
                f(x_1, x_2, x_3) = \overline{x_1 \cdot x_2}
            \end{equation*}
        \item siehe b)
        \item %TODO eigentlich nur VCC und GND tauschen
    \end{enumerate}
\end{document}
